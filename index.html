<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FlowLab</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#16a085" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("✅ Service Worker actif"))
        .catch(err => console.error("❌ SW error:", err));
    }

    function appelerWebhook(url) {
      fetch(url)
        .then(() => alert("✅ Requête envoyée"))
        .catch(() => alert("❌ Erreur de connexion"));
    }
  </script>
</head>
<body>
  <header class="top-bar">
    <img src="images/logo.png" alt="FlowLab Logo" class="logo" style="height: 70px;" />
    <h1>FlowLab</h1>
    <h2>Système intelligent d’implémentation de la vaccination en RDC</h2>
    <p>Accueil du système. Choisissez votre espace selon votre rôle.</p>
  </header>

  <main class="homepage">
    <div class="grid-cards">

      <!-- 🩺 Espace Médical -->
      <div class="card" style="min-height: 480px;">
        <img src="images/espacemedical.png" alt="Espace médical" style="width: 100%; max-height: 220px; object-fit: contain;" />
        <h3>Espace Médical</h3>
        <p>Ajoutez un enfant ou une grossesse. Suivi intelligent, même hors-ligne.</p>
        <a href="infirmiere.html" class="btn btn-primary">🩺 Accéder à l'espace infirmière</a>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/register-child')">👶 Tester Enregistrement Enfant</button>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/register-pregnancy')">🤰 Tester Enregistrement Grossesse</button>
      </div>

      <!-- 📊 Supervision & retards -->
      <div class="card" style="min-height: 480px;">
        <img src="images/espacesuperviseur.png" alt="Supervision" style="width: 100%; max-height: 220px; object-fit: contain;" />
        <h3>Supervision & retards</h3>
        <p>Statistiques, export, surveillance des soins par structure.</p>
        <a href="superviseur.html" class="btn btn-secondary">📊 Accéder à l'espace superviseur</a>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/surveillance-soins')">📅 Voir Vaccins à faire</button>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/stats-superviseur')">📈 Voir Statistiques</button>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/suivi-equitable')">🧭 Suivi équitable</button>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/export-retards')">📥 Export des retards</button>
        <button class="btn" onclick="appelerWebhook('https://n8n-automation-server-waz-production.up.railway.app/webhook-test/6c2763db-464e-4af1-849e-9eb2d2de30cb')">✅ Marquer un vaccin fait</button>
      </div>

    </div>
  </main>
</body>
</html>

